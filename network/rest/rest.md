# REST, RESTful

# REST

## REST의 정의

자원의 이름(자원의 표현)으로 구분하여 해당 자원의 상태(정보)를 주고 받는 모든 것을 의미한다.

- 자원의 표현

  - 자원: 해당 소프트웨어가 관리하는 모든 것 ex) 문서, 그림, 데이터 등
  - 자원의 표현: 그 자원을 표현하기 위한 이름 ex) DB의 학생 정보가 자원일 때, 'students'를 자원의 표현으로 정한다.

- 상태 전달
  - 데이터가 요청되어지는 시점에서 자원의 상태를 전달한다.
  - JSON 혹은 XML를 통해 데이터를 주고 받는 것이 일반적이다.

또한 WWW와 같은 분산 하이퍼 미디어 시스템을 위한 소프트웨어 개발 아키텍처의 한 형식이다.

- REST는 기본적으로 웹의 기존 기술과 HTTP 프로토콜을 그대로 활용하기 때문에 웹의 장점을 최대한 활용할 수 있는 아키텍처 스타일이다.
- REST는 네트워크 상에서 Client와 Server 사이의 통신 방식 중 하나이다.

## REST 구성 요소

1. 자원(Resource): URI

- 모든 자원에 고유한 ID가 존재하고, 이 자원은 서버에 존재한다.
- 클라이언트는 URI를 이용해서 자원을 지정하고 해당 자원의 상태(정보)에 대한 조작을 서버에 요청한다.

2. 행위(Verb): HTTP Method

- HTTP 프로토콜의 Method(GET, POST, PUT, DELETE) 메소드를 사용한다.

3. 표현(Representation of Resource)

- 클라이언트가 자원의 상태(정보)에 대한 조작을 요청하면 서버는 이에 적절한 응답을 보낸다.
- REST에서 하나의 자원은 JSON, XML, TEXT 등 여러 형태의 표현(Representation)으로 나타내어 질 수 있다.

## REST 특징

1. 서버-클라이언트 구조

- 자원이 있는 쪽이 서버, 자원을 요청하는 쪽이 클라이언트가 된다.

  - REST Server: API를 제공하고 비즈니스 로직 처리 및 저장을 책임 진다.
  - Client: 사용자 인증이나 context(세선, 로그인 정보) 등을 직접 관리하고 책임진다.

  -> 서로 간의 의존성이 줄어든다.

2. Stateless(무상태)

- HTTP 프로토콜은 Stateless 프로토콜이므로 REST 역시 무상태성을 갖는다.
- 클라이언트의 context를 서버에 저장하지 않는다.
  - 즉, 세션와 쿠키와 같은 context 정보를 신경쓰지 않아도 되므로 구현이 단순해진다.
- 서버는 각각의 요청을 완전히 별개의 것으로 인식하고 처리한다.

  - 각 API 서버는 Client의 요청만을 단순 처리한다.
  - 따라서 이전 요청이 다음 요청의 처리에 연관되어서는 안된다.

  -> 서버의 처리 방식에 일관성을 부여하고 부담이 줄어들며, 서비스의 자유도가 높아진다.

3. Layered System

- 클라이언트는 REST API 서버만 호출한다.
- REST 서버는 다층 계층으로 구성될 수 있다.
  - API 서버는 순수 비즈니스 로직을 수행하고 그 앞단에 보안, 암호화, 사용자 인증 등을 추가하여 구조상의 유연성을 줄 수 있다.
  - PROXY, 게이트웨이와 같은 네트워크 기반의 중간매체를 사용할 수 있다.

4. Uniform Interface(인터페이스 일관성)

- URI로 지정한 Resource에 대한 조작을 통일되고 한정적인 인터페이스로 수행한다.
- 특정 언어나 기술에 종속되지 않고, HTTP 표준 프로토콜에 따르는 모든 플랫폼에서 사용 가능하다.

5. Cacheable(캐시 처리 가능)

- HTTP 프로토콜을 그대로 사용하므로 웹에서 사용하는 기존의 인프라를 그대로 사용할 수 있다.
- 캐시 사용을 통해 응답시간이 빨라지고 REST 서버 트랜잭션이 발생하지 않기 때문에 전체 응답 시간, 성능, 서버의 자원 이용률을 향상시킬 수 있다.

이러한 REST의 기본 원칙을 성실히 지킨 서비스 디자인을 `'RESTful'` 하다 라고 표현할 수 있다.

# RESTful API

## RESTful 하게 API를 디자인 한다는 것은?

1. `리소스`와 `행위`를 명시적이고 직관적으로 분리한다.
2. Message는 Header와 Body를 명확히 분리하여 사용한다.
   - Entity에 대한 내용은 Body에 담는다.
   - 애플리케이션 서버가 행동할 판단의 근거가 되는 컨트롤 정보인 API 버전 정보, 응답 받고자 하는 타입 등은 header에 담는다.
3. API 버전을 관리할 수 있어야 한다.
4. 서버와 클라이언트가 같은 방식을 사용하여 요청하도록 한다.
   - 브라우저는 form-data 형식의 submit으로 보내고, 서버에서는 json 형태로 보내는 식의 분리보다는, json으로 보내든 둘 다 form-data 형식으로 보내든 하나로 통일하도록 한다.

## 장점

1. Open API를 제공하기 쉽다.
2. 멀티 플랫폼 지원, 연동이 쉽다.
3. 원하는 타입으로 데이터를 송수신할 수 있다.
4. 기존 웹 인프라인 HTTP를 사용한다.

## 단점

1. 사용할 수 있는 HTTP Method가 적다.
2. 분산 환경에 부적합하다.
3. HTTP 통신 모델만 지원한다.

## RESTful API 설계 시 주의할 점

1. URI는 resource를 표현해야 한다. -> 동사보다는 명사를 사용한다.
2. 자원에 대한 행위는 HTTP Method(GET, POST, PUT, DELETE 등)로 표현한다.
3. 슬래시 구분자(/)는 계층 관계를 나타내는데 사용한다.
4. URL 마지막 문자로 슬래시(/)를 포함하지 않는다.
5. 하이픈(-)은 URI 가독성을 높이는데 사용한다.
6. 밑줄(\_)은 URI에 사용하지 않는다.
7. URI 경로에는 소문자를 사용한다.
8. 파일 확장자는 URI에 포함시키지 않는다.

## RESTful 하지 못한 경우

- CRUD 기능을 모두 POST로만 처리하는 API
- route에 resource, id 외의 정보가 들어가는 경우  
  `ex) /students/updateName`

---

### [참고]

https://gmlwjd9405.github.io/2018/09/21/rest-and-restful.html

https://khj93.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-REST-API%EB%9E%80-REST-RESTful%EC%9D%B4%EB%9E%80
